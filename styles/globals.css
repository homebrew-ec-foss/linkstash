* {
    box-sizing: border-box;
}

:root {
    --bg: #fafafa;
    --text: #111827;
    --muted: #9ca3af;
    --card: #ffffff;
    --border: #e6e6e6;
    --brand: #ff6a00;
    --brand-text: #ffffff;
    --link: #4f46e5;
    --refresh-bg: #eef2ff;
    --refresh-text: #3730a3;

    --serif-font: 'EB Garamond', Georgia, 'Times New Roman', serif;
}

.dark {
    --bg: #0b1220;
    --text: #e6eef6;
    --muted: #9aa4b2;
    --card: #0f1724;
    --border: rgba(255, 255, 255, 0.06);
    --brand: #ff7a29;
    --brand-text: #0b1220;
    --link: #7c8fff;
    --refresh-bg: rgba(124, 143, 255, 0.08);
    --refresh-text: #cdd6ff;
}

html,
body {
    height: 100%;
}

body {
    margin: 0;
    background: var(--bg);
    color: var(--text);
    font-family: Inter, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
    font-size: 13px;
    line-height: 1.22;
    padding: 6px;
    transition: background 150ms ease, color 150ms ease;
}

/* Top bar */
.topbar {
    background: var(--brand);
    color: var(--brand-text);
    padding: 4px 0;
    margin-bottom: 8px;
}

.topbar .container {
    font-size: 13px;
}



.topbar .container {
    max-width: 960px;
    margin: 0 auto;
    padding: 0 16px;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    color: inherit;
}

/* Respect user's OS theme preference (no JS toggle). */
@media (prefers-color-scheme: dark) {
    :root {
        --bg: #0b1220;
        --text: #e6eef6;
        --muted: #9aa4b2;
        --card: #000815;
        --border: rgba(255, 255, 255, 0.06);
        --brand: #ff7a29;
        --brand-text: #0b1220;
        --link: #7c8fff;
        --refresh-bg: rgba(124, 143, 255, 0.08);
        --refresh-text: #cdd6ff;
    }
}

/* Top bar removed: hide any leftover markup */
.topbar {
    display: none;
}

/* Lightweight brand styles (if present elsewhere) */
.brand {
    font-weight: 700;
    text-decoration: none;
    color: inherit;
    font-size: 15px;
}

/* Theme toggle button */
.theme-toggle {
    background: transparent;
    border: none;
    color: inherit;
    font-size: 16px;
    padding: 6px;
    border-radius: 6px;
    cursor: pointer;
}


/* Layout container */
.container {
    max-width: 680px;
    margin: 0 auto;
    padding: 0 8px;
}

.card {
    background: var(--card);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 0;
    box-shadow: 0 1px 0 rgba(0, 0, 0, 0.02);
}

h1 {
    font-family: var(--serif-font);
    font-size: 22px;
    margin: 2px 0 8px;
    line-height: 1.05;
}

/* Links list */
ol.link-list {
    list-style: none;
    margin: 0;
    padding: 0;
}

ol.link-list li {
    display: flex;
    gap: 6px;
    padding: 6px 8px;
    align-items: flex-start;
    border-bottom: 1px solid var(--border);
}

ol.link-list li:last-child {
    border-bottom: none;
}

.rank {
    width: 20px;
    text-align: right;
    color: var(--muted);
    font-weight: 600;
    font-size: 12px;
}

.link-main {
    flex: 1;
}

.link-title {
    color: var(--link);
    font-weight: 600;
    text-decoration: none;
    font-size: 14px;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
    text-overflow: ellipsis;
}

.link-title:hover {
    text-decoration: underline;
}

.link-domain {
    color: var(--muted);
    font-size: 11px;
    margin-top: 2px;
    display: block;
}

.votes {
    margin-left: 8px;
    color: var(--muted);
    font-size: 11px;
    min-width: 48px;
    text-align: right;
    align-self: flex-start;
    margin-top: 4px;
}

/* Fallbacks for very small screens */
@media (max-width: 480px) {
    .rank {
        width: 22px;
    }

    h1 {
        font-size: 20px;
    }
}

/* Optional: compact card variant */
.card.compact {
    padding: 0;
    border-radius: 4px;
}

/* Admin page styles */
.admin {
    padding: 16px;
    overflow-x: hidden;
}

.admin .admin-controls {
    display: flex;
    gap: 8px;
    margin-bottom: 12px;
    align-items: center;
    flex-wrap: wrap;
    /* allow controls to wrap on smaller screens to avoid overflow */
}

.admin .admin-input,
.admin .search-input {
    flex: 1 1 220px;
    /* grow and shrink, with sensible base */
    min-width: 140px;
    max-width: 100%;
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: 6px;
    background: transparent;
    color: var(--text);
    box-sizing: border-box;
}

/* Buttons should not force additional width */
.admin .admin-small {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: transparent;
    color: inherit;
    flex: 0 0 auto;
}

.admin-table {
    width: 100%;
    border-collapse: collapse;
}

.admin-table thead th {
    text-align: left;
    padding: 8px;
    font-size: 13px;
    color: var(--text);
}

.admin-table tbody tr {
    border-top: 1px solid var(--border);
}

.admin-table td {
    padding: 8px;
    vertical-align: top;
}

.title-line {
    font-weight: 600;
}

.url-line {
    color: var(--muted);
    font-size: 12px;
    margin-top: 6px;
}

.url-line a {
    overflow-wrap: anywhere;
    word-break: break-word;
}

/* Ensure the delete button column is always visible and the title/URL column wraps */
.admin-table td:last-child {
    width: 140px;
    min-width: 120px;
    text-align: right;
    white-space: nowrap;
}

.admin-table td:nth-child(2) {
    /* leave space for ID and action column so it doesn't push the delete button off-screen */
    max-width: calc(100% - 380px);
    overflow-wrap: anywhere;
    word-break: break-word;
}

.delete-btn {
    color: var(--brand-text);
    background: var(--brand);
    border: none;
    padding: 6px 10px;
    border-radius: 6px;
}

.delete-btn[disabled] {
    opacity: 0.6
}

.id-cell code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', 'Courier New', monospace;
    font-size: 12px;
    color: var(--muted);
}

@media (max-width: 680px) {

    /* Header controls wrap on small screens */
    .admin .admin-controls {
        flex-wrap: wrap;
    }

    .admin .admin-input,
    .admin .search-input {
        flex: 1 1 100%;
        min-width: 0;
    }

    .admin-table thead {
        display: none
    }

    .admin-table,
    .admin-table tbody,
    .admin-table tr,
    .admin-table td {
        display: block;
        width: 100%
    }

    .admin-table tr {
        margin-bottom: 12px
    }

    .admin-table td {
        padding: 8px 4px
    }

    /* Allow the middle column to expand and keep the action button visible below it */
    .admin-table td:nth-child(2) {
        max-width: none;
        overflow-wrap: anywhere;
        word-break: break-word;
    }

    .admin-table td:last-child {
        width: auto;
        min-width: 0;
        text-align: left;
        padding-top: 8px
    }

    .delete-btn {
        width: 100%
    }
}

/* Refresh badge + flash animation used by the client-side list */
.refresh-badge {
    background: var(--refresh-bg);
    color: var(--refresh-text);
    border-radius: 999px;
    padding: 3px 6px;
    font-size: 11px;
    font-weight: 600;
    opacity: 0.9;
    transition: transform 180ms ease, opacity 200ms ease;
}

.refresh-badge.show {
    transform: translateY(-4px) scale(1.02);
    box-shadow: 0 6px 16px rgba(99, 102, 241, 0.12);
}

/* Header GitHub button */
.gh-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: transparent;
    color: inherit;
    text-decoration: none;
    padding: 4px;
    transition: transform 120ms ease, box-shadow 120ms ease;
}

.gh-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.06);
}

/* Reader header button */
.reader-header-button {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    width: 32px;
    height: 32px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: transparent;
    color: inherit;
    padding: 4px;
    transition: transform 120ms ease, box-shadow 120ms ease;
}

.reader-header-button:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 12px rgba(0, 0, 0, 0.06);
}

/* Reader modal / queue */
.reader-overlay {
    position: fixed;
    inset: 0;
    background: rgba(0, 0, 0, 0.5);
    z-index: 1000;
    /* allow scrolling inside the reader */
    overflow: auto;
}

/* Full-screen reader panel (no centered popup) */
.reader-panel {
    position: relative;
    width: 100vw;
    height: 100vh;
    display: grid;
    grid-template-columns: 220px 1fr 320px;
    background: var(--card);
    color: var(--text);
    border-radius: 0;
    overflow: auto;
}

/* Minimal "Pocket-like" reader style (full-screen, page-like, scrollable) */
.reader-panel.reader-minimal {
    grid-template-columns: 1fr !important;
    width: 100%;
    height: 100%;
    background: var(--card);
    box-shadow: none;
}

.reader-panel.reader-minimal .reader-sidebar,
.reader-panel.reader-minimal .reader-queue,
.reader-panel.reader-minimal .reader-ctrls-vertical {
    display: none !important;
}

.reader-panel.reader-minimal .reader-header {
    background: transparent;
    border-bottom: 1px solid rgba(0, 0, 0, 0.04);
}

.reader-panel.reader-minimal .reader-content {
    padding: 28px 18px;
    display: block;
}

/* Minimal reading content: a centered readable measure without a floating popup */
.reader-panel.reader-minimal .markdown-body {
    background: transparent;
    padding: 0 18px 48px;
    font-family: var(--serif-font);
    font-size: 18px;
    line-height: 1.75;
    max-width: 760px;
    margin: 0 auto;
    box-shadow: none;
}

.reader-panel.reader-minimal .markdown-body h1,
.reader-panel.reader-minimal .markdown-body h2,
.reader-panel.reader-minimal .markdown-body h3 {
    font-family: var(--serif-font);
    font-weight: 700;
    margin-top: 20px;
    margin-bottom: 10px;
}

.reader-panel.reader-minimal .reader-controls button,
.reader-panel.reader-minimal .reader-controls .reader-open-link {
    background: rgba(0, 0, 0, 0.04);
    border: none;
    padding: 6px 8px;
    border-radius: 6px;
}

@media (prefers-color-scheme: dark) {
    .reader-panel.reader-minimal .markdown-body {
        color: var(--text);
    }
}

.reader-sidebar {
    padding: 18px 16px;
    border-right: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.02), transparent);
    overflow: auto;
}

.sidebar-title {
    font-weight: 800;
    margin-bottom: 12px;
}

.sidebar-excerpt {
    color: var(--muted);
    font-size: 13px;
    line-height: 1.6;
    white-space: pre-wrap;
}

.reader-body {
    display: flex;
    flex-direction: column;
    min-width: 0;
    position: relative;
}

.reader-ctrls-vertical {
    position: absolute;
    left: 12px;
    top: 12px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    z-index: 4;
}

.reader-btn-small {
    width: 38px;
    height: 34px;
    border-radius: 8px;
    border: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.04);
    display: inline-flex;
    align-items: center;
    justify-content: center;
    color: inherit;
    cursor: pointer;
}

.reader-btn-small[disabled] {
    opacity: 0.4;
    cursor: default;
}

.reader-header {
    display: flex;
    align-items: center;
    padding: 12px 16px;
    border-bottom: 1px solid var(--border);
    position: sticky;
    top: 0;
    background: linear-gradient(to bottom, rgba(0, 0, 0, 0.02), transparent);
    z-index: 2;
}

.reader-status {
    display: flex;
    gap: 6px;
    margin-left: 12px;
}

.status-badge {
    font-size: 11px;
    padding: 2px 6px;
    border-radius: 4px;
    font-weight: 500;
    text-transform: uppercase;
    letter-spacing: 0.5px;
}

.status-badge.offline {
    background: #ef4444;
    color: white;
}

.status-badge.cached {
    background: #f59e0b;
    color: white;
}

.reader-nav {
    display: flex;
    gap: 8px;
    align-items: center;
    margin-right: 8px;
}

.nav-btn {
    padding: 6px 8px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.04);
    color: inherit;
    cursor: pointer;
    font-size: 14px;
}

.nav-btn[disabled] {
    opacity: 0.4;
    cursor: default;
}

.reader-title {
    font-weight: 700;
    font-size: 14px;
    flex: 1 1 auto;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    margin-right: 12px;
}

/* Header link shown in the reader top bar (domain or short URL) */
.reader-header .reader-header-link,
.reader-header .reader-header-text {
    color: var(--muted);
    text-decoration: none;
    display: inline-block;
    max-width: 70%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

/* Remove header nav arrows spacing */
.reader-nav {
    display: none !important;
}

.nav-btn {
    display: none !important;
}

.reader-controls {
    display: flex;
    gap: 8px;
    margin-left: auto;
}

.reader-controls button,
.reader-controls .reader-open-link,
.reader-controls button[aria-label="Close"] {
    padding: 6px 10px;
    border-radius: 6px;
    border: 1px solid var(--border);
    background: rgba(0, 0, 0, 0.03);
    color: inherit;
    font-size: 13px;
    cursor: pointer;
}

.reader-controls .reader-open-link {
    text-decoration: none;
    display: inline-flex;
    align-items: center;
}

.reader-controls button[disabled] {
    opacity: 0.5;
    cursor: default;
}

.reader-content {
    padding: 18px 20px;
    overflow: auto;
    min-height: 320px;
    background: transparent;
}

.reader-queue {
    width: 320px;
    border-left: 1px solid var(--border);
    background: linear-gradient(180deg, rgba(0, 0, 0, 0.02), transparent);
    overflow: auto;
}

.reader-queue ol {
    list-style: none;
    margin: 0;
    padding: 8px;
}

.reader-queue li {
    padding: 10px 12px;
    display: flex;
    align-items: center;
    justify-content: space-between;
    cursor: pointer;
    font-size: 13px;
    color: var(--muted);
    border-radius: 6px;
}

.reader-queue li:hover {
    background: rgba(0, 0, 0, 0.02);
    color: inherit;
}

.reader-queue li.active {
    background: rgba(99, 102, 241, 0.08);
    font-weight: 700;
    color: inherit;
}

.queue-remove {
    border: none;
    background: transparent;
    color: var(--muted);
    font-size: 14px;
    cursor: pointer;
    padding-left: 6px;
}

.markdown-body {
    font-family: var(--serif-font);
    font-size: 14px;
    line-height: 1.7;
    color: var(--text);
    max-width: 84ch;
}

.markdown-title {
    margin: 0 0 18px 0;
    font-weight: 700;
    /* 800 not available in EB Garamond; use 700 */
    font-size: 40px;
    line-height: 1.08;
    font-family: var(--serif-font);
}

.markdown-body h1,
.markdown-body h2,
.markdown-body h3 {
    margin-top: 20px;
    margin-bottom: 8px;
    line-height: 1.15;
}

.markdown-body p {
    margin: 0 0 12px 0;
}

.markdown-body a {
    color: var(--link);
    text-decoration: underline;
}

.markdown-body pre {
    /* Code block container: limit to the container width and allow sensible wrapping */
    background: rgba(0, 0, 0, 0.04);
    padding: 12px 14px;
    border-radius: 8px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace;
    font-size: 13px;
    line-height: 1.5;
    overflow: auto;
    border: 1px solid var(--border);
    margin: 18px 0;
    box-sizing: border-box;
    max-width: 100%;
    /* prefer preserving formatting but wrap very long lines instead of overflowing the page */
    white-space: pre-wrap;
    word-break: break-word;
    overflow-wrap: anywhere;
    tab-size: 4;
}

/* Ensure <code> inside <pre> does not get the inline-code background/padding; allow wrap inside long inline tokens inside pre */
.markdown-body pre code {
    background: transparent;
    padding: 0;
    border-radius: 0;
    font-family: inherit;
    font-size: inherit;
    line-height: inherit;
    color: inherit;
    display: block;
    white-space: pre-wrap;
    word-break: break-word;
}

/* Inline code (only applies outside code blocks) */
.markdown-body code {
    background: rgba(0, 0, 0, 0.04);
    padding: 2px 6px;
    border-radius: 6px;
    font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, 'Roboto Mono', monospace;
    font-size: 0.92em;
    /* Allow long inline code tokens to wrap so they don't blow out the line */
    white-space: pre-wrap;
    word-break: break-word;
}

@media (prefers-color-scheme: dark) {
    .markdown-body pre {
        background: rgba(255, 255, 255, 0.02);
        border-color: rgba(255, 255, 255, 0.04);
    }
}

.markdown-body img {
    max-width: 100%;
    height: auto;
    display: block;
    margin: 18px auto;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
    border: 1px solid rgba(0, 0, 0, 0.04);
}

.markdown-img {
    display: block;
    max-width: 100%;
    height: auto;
    margin: 18px auto;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
}

/* Responsive embedded youtube */
.embed-youtube {
    position: relative;
    width: 100%;
    max-width: 880px;
    margin: 18px auto;
    padding-top: 56.25%;
    /* 16:9 */
}

.embed-youtube iframe {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: 0;
    border-radius: 8px;
    box-shadow: 0 10px 30px rgba(2, 6, 23, 0.06);
}

/* Flash highlight on list refresh */
@keyframes flash {
    0% {
        background: rgba(99, 102, 241, 0.08);
    }

    100% {
        background: transparent;
    }
}

.link-item.flash {
    animation: flash 1.6s ease forwards;
}

/* Date group header */
.date-group {
    border-top: 1px solid var(--border);
}

.date-heading {
    padding: 8px 12px;
    font-weight: 700;
    color: var(--muted);
    background: transparent;
    font-size: 13px;
}

/* Responsive: narrow reading view similar to Obsidian mobile */
@media (max-width: 640px) {
    .reader-overlay {
        align-items: stretch;
        padding: 0;
    }

    .reader-panel {
        width: 100%;
        height: 100vh;
        grid-template-columns: 1fr !important;
        max-height: none;
        border-radius: 0;
    }

    .reader-sidebar,
    .reader-queue,
    .reader-ctrls-vertical {
        display: none !important;
    }

    .reader-header {
        padding: 10px 12px;
        border-bottom: 1px solid var(--border);
        position: sticky;
        top: 0;
        z-index: 3;
        background: var(--card);
    }

    /* Ensure minimal-reader header is opaque on mobile (overrides more specific transparent rule) */
    .reader-panel.reader-minimal .reader-header {
        background: var(--card);
    }

    .reader-body {
        padding: 0;
    }

    .reader-content {
        padding: 14px 14px 28px;
        padding-top: 64px;
        /* ensure content starts below sticky header */
        min-height: 60vh;
        overflow: auto;
    }

    .markdown-body {
        font-size: 15px;
        line-height: 1.6;
        max-width: 64ch;
        margin: 0 auto;
        padding-bottom: 16px;
    }

    .markdown-title {
        font-size: 28px;
    }

    .markdown-body h1 {
        font-size: 28px;
        margin-top: 18px;
    }

    .markdown-body h2 {
        font-size: 20px;
        margin-top: 18px;
    }

    .markdown-body h3 {
        font-size: 18px;
        margin-top: 18px;
    }

    /* Ensure code sizes remain compact on small screens */
    .markdown-body pre {
        font-size: 13px;
    }

    .markdown-body code {
        font-size: 0.92em;
    }

    .reader-header .reader-controls {
        display: flex;
        gap: 6px;
    }
}

@media (max-width: 420px) {
    .reader-panel {
        width: 96%;
        border-radius: 6px;
    }

    .markdown-body {
        font-size: 14px;
        max-width: 58ch;
    }
}